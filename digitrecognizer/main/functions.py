import numpy as np # linear algebra
import tensorflow as tf
from tensorflow.python.framework import ops
from tensorflow.keras.models import Sequential
from tensorflow.keras.layers import Activation, Dropout, Dense, Flatten, BatchNormalization, Conv2D, MaxPooling2D
from tensorflow.keras.optimizers import RMSprop,Adam
from tensorflow.keras import backend as K
from tensorflow.keras.preprocessing import image

def predict(request):
    model=tf.keras.models.load_model("./anoth_model11.h5")
    result=0
    imgData = request.POST.get('img')
    img = np.asarray(imgData)
    img=img.reshape(1,28,28,1)
    predictions = model.predict(img)
    classIndex = model.predict_classes(img)
    probabilityValue = np.amax(predictions)
    
    if probabilityValue > 0.3:
        result=(classIndex[0])
    else:
        result=(0)
    return (result)

    return result